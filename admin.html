<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <style>
        /* Basic Styles for Admin Panel */
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        h1 {
            font-size: 2rem;
        }

        input, button {
            margin: 10px 0;
            padding: 10px;
            font-size: 1rem;
        }

        input[type="text"] {
            width: 200px;
        }

        .ip-list, .banned-ip-list {
            margin-top: 20px;
        }

        .ip-list div, .banned-ip-list div {
            margin: 5px 0;
        }
    </style>
</head>
<body>

<h1>Admin Panel</h1>

<!-- Ban IP Section -->
<div>
    <h3>Ban an IP Address</h3>
    <input type="text" id="ban-ip" placeholder="Enter IP to ban">
    <button onclick="banIP()">Ban IP</button>
</div>

<!-- Unban IP Section -->
<div>
    <h3>Unban an IP Address</h3>
    <input type="text" id="unban-ip" placeholder="Enter IP to unban">
    <button onclick="unbanIP()">Unban IP</button>
</div>

<!-- Image Upload Section -->
<div>
    <h3>Approve Image Requests</h3>
    <input type="file" id="image-upload">
    <button onclick="uploadImage()">Upload Image</button>
    <div id="image-requests"></div>
</div>

<!-- Last IPs Section -->
<div>
    <h3>Last IPs:</h3>
    <div id="ip-list" class="ip-list"></div>
</div>

<!-- Banned IPs Section -->
<div>
    <h3>Banned IPs:</h3>
    <div id="banned-ip-list" class="banned-ip-list"></div>
</div>

<script>
    // Get IP List and Banned IP List from LocalStorage
    const ipList = JSON.parse(localStorage.getItem("recentIPs")) || [];
    const bannedIPs = JSON.parse(localStorage.getItem("bannedIPs")) || [];
    const imageRequests = JSON.parse(localStorage.getItem("imageRequests")) || [];

    // Show recent IPs
    function updateIPList() {
        const ipListElement = document.getElementById("ip-list");
        ipListElement.innerHTML = ""; // Clear list
        ipList.forEach(ip => {
            const ipItem = document.createElement("div");
            ipItem.textContent = ip;
            ipListElement.appendChild(ipItem);
        });
    }

    // Show Banned IPs
    function updateBannedIPList() {
        const bannedIPListElement = document.getElementById("banned-ip-list");
        bannedIPListElement.innerHTML = ""; // Clear list
        bannedIPs.forEach(ip => {
            const ipItem = document.createElement("div");
            ipItem.textContent = ip;
            bannedIPListElement.appendChild(ipItem);
        });
    }

    // Ban an IP
    function banIP() {
        const ipToBan = document.getElementById("ban-ip").value.trim();
        if (ipToBan && !bannedIPs.includes(ipToBan)) {
            bannedIPs.push(ipToBan);
            localStorage.setItem("bannedIPs", JSON.stringify(bannedIPs));
            updateBannedIPList();
            alert(`IP ${ipToBan} has been banned.`);
        } else {
            alert('Invalid IP or already banned.');
        }
    }

    // Unban an IP
    function unbanIP() {
        const ipToUnban = document.getElementById("unban-ip").value.trim();
        const index = bannedIPs.indexOf(ipToUnban);
        if (index !== -1) {
            bannedIPs.splice(index, 1);
            localStorage.setItem("bannedIPs", JSON.stringify(bannedIPs));
            updateBannedIPList();
            alert(`IP ${ipToUnban} has been unbanned.`);
        } else {
            alert('IP is not banned.');
        }
    }

    // Handle image uploads (just a simulation of approval)
    function uploadImage() {
        const imageFile = document.getElementById("image-upload").files[0];
        if (imageFile) {
            const requestId = Date.now(); // Generate a unique ID for the request
            imageRequests.push({ id: requestId, fileName: imageFile.name, status: "pending" });
            localStorage.setItem("imageRequests", JSON.stringify(imageRequests));
            alert("Image uploaded and awaiting approval.");
            displayImageRequests();
        }
    }

    // Display pending image requests
    function displayImageRequests() {
        const imageRequestsElement = document.getElementById("image-requests");
        imageRequestsElement.innerHTML = ""; // Clear previous list
        imageRequests.forEach(request => {
            const div = document.createElement("div");
            div.textContent = `${request.fileName} - Status: ${request.status}`;
            const approveButton = document.createElement("button");
            approveButton.textContent = "Approve";
            approveButton.onclick = () => approveImage(request.id);
            div.appendChild(approveButton);
            imageRequestsElement.appendChild(div);
        });
    }

    // Approve an image upload request
    function approveImage(requestId) {
        const request = imageRequests.find(req => req.id === requestId);
        if (request) {
            request.status = "approved";
            localStorage.setItem("imageRequests", JSON.stringify(imageRequests));
            alert(`Image ${request.fileName} has been approved.`);
            displayImageRequests();
        }
    }

    // Initial Update of IP Lists
    updateIPList();
    updateBannedIPList();
    displayImageRequests();
</script>

</body>
</html>
